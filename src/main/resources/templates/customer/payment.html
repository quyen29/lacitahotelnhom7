<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>La CiTa - Thanh To√°n</title>
    <link rel="stylesheet" th:href="@{/customer/payment/payment.css}"/>
</head>
<body>
<header>
    <div class="navbar">
        <div class="logo">La CiTa</div>
        <div class="menu">
            <a th:href="@{/}">Trang ch·ªß</a>
            <a th:href="@{/booking}" class="active">ƒê·∫∑t ph√≤ng</a>
            <a th:href="@{/promotion}">Khuy·∫øn m√£i</a>
            <a th:href="@{/contact}">Li√™n h·ªá</a>
        </div>

        <div class="user-menu">
            <span sec:authorize="!isAuthenticated()">
                        <div class="user-icon">üë§</div>
                        <div class="user-options" id="userOptions">
                            <a type="submit" th:href="@{/showLoginPage}">ƒêƒÉng nh·∫≠p</a>
                            <a type="submit" th:href="@{/register}">ƒêƒÉng k√Ω</a>
                        </div>
            </span>
            <span sec:authorize="isAuthenticated()">
                        <div class="user-icon">üë§</div>
                        <div class="user-options" id="userOptions">
                            <a type="submit" th:href="@{/profile}">Ch·ªânh s·ª≠a h·ªì s∆°</a>
                            <a type="submit" th:href="@{/bookingHistory}">Xem l·ªãch s·ª≠ ƒë·∫∑t ph√≤ng</a>
                            <form th:action="@{/logout}" method="POST" class="logout-form">
                                <input type="submit" value="ƒêƒÉng xu·∫•t" class="logout-btn"/>
                            </form>
                        </div>
            </span>
        </div>
    </div>
</header>
<div class="intro-text">
        <h1>THANH TO√ÅN</h1>
    </div>
<div class="payment-wrapper">
    <div class="payment-left">
        <h3>Th√¥ng tin kh√°ch h√†ng</h3>
        <p><strong>H·ªç t√™n:</strong> <span th:text="${customer.fullName}"></span></p>
        <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> <span th:text="${customer.phoneNumber}"></span></p>
        <p><strong>Email:</strong> <span th:text="${customer.email}"></span></p>

        <h3>Th√¥ng tin ƒë·∫∑t ph√≤ng</h3>
        <p><strong>Lo·∫°i ph√≤ng:</strong> <span th:text="${booking.roomType.roomTypeName}"></span></p>
        <p><strong>S·ªë l∆∞·ª£ng ph√≤ng:</strong> <span th:text="${booking.roomQuantity}"></span></p>
        <p><strong>Th·ªùi gian nh·∫≠n ph√≤ng:</strong> <span th:text="${#temporals.format(booking.checkInDate, 'dd/MM/yyyy HH:mm')}"></span></p>
        <p><strong>Th·ªùi gian tr·∫£ ph√≤ng:</strong> <span th:text="${#temporals.format(booking.checkOutDate, 'dd/MM/yyyy HH:mm')}"></span></p>
        <p><strong>S·ªë ng∆∞·ªùi l·ªõn (18-59 tu·ªïi):</strong> <span th:text="${booking.adult}"></span></p>
        <p><strong>S·ªë ng∆∞·ªùi cao tu·ªïi (tr√™n 60 tu·ªïi):</strong> <span th:text="${booking.elder}"></span></p>
        <p><strong>S·ªë tr·∫ª v·ªã th√†nh ni√™n (12-17 tu·ªïi):</strong> <span th:text="${booking.teen}"></span></p>
        <p><strong>S·ªë tr·∫ª em (3-11 tu·ªïi):</strong> <span th:text="${booking.child}"></span></p>
        <p><strong>S·ªë tr·∫ª d∆∞·ªõi 3 tu·ªïi (0-2 tu·ªïi):</strong> <span th:text="${booking.underThree}"></span></p>
        <p><strong>T·ªïng ti·ªÅn:</strong>
            <span id="totalPrice"
                  th:text="${#numbers.formatDecimal(booking.totalPrice, 0, 'COMMA', 0, 'POINT')} + ' VND'"></span>
        </p>
    </div>

    <div class="payment-right">
        <form class="payment-form" th:action="@{/booking/showBookingForm/qrpay}" method="POST">
            <input type="hidden" name="roomTypeId" th:value="${booking.roomType.roomTypeID}"/>
            <input type="hidden" name="price" th:value="${booking.totalPrice}"/>
            <input type="hidden" name="checkInDate" th:value="${#temporals.format(booking.checkInDate, 'yyyy-MM-dd')}"/>
            <input type="hidden" name="checkOutDate"
                   th:value="${#temporals.format(booking.checkOutDate, 'yyyy-MM-dd')}"/>
            <input type="hidden" name="checkInHour" th:value="${#temporals.format(booking.checkInDate, 'HH')}"/>
            <input type="hidden" name="checkOutHour" th:value="${#temporals.format(booking.checkOutDate, 'HH')}"/>
            <input type="hidden" name="roomQuantity" th:value="${booking.roomQuantity}"/>
            <input type="hidden" name="numberOfAdult" th:value="${booking.numberOfAdult}"/>
            <input type="hidden" name="numberOfChild" th:value="${booking.numberOfChild}"/>
            <input type="hidden" name="totalPrice" th:value="${booking.totalPrice}"/>
            <div class="form-group">
                <label for="voucherSelect">Ch·ªçn voucher gi·∫£m gi√°:</label>
                <select id="voucherSelect" name="voucherId">
                    <option value="">-- Kh√¥ng √°p d·ª•ng --</option>
                    <option th:each="voucher : ${voucherList}"
                            th:value="${voucher.voucherID}"
                            th:text="${voucher.code + ' - Gi·∫£m ' + voucher.discountPercent + '%'}">
                    </option>
                </select>
            </div>
            <h3>Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n</h3>
            <label>
                <input type="radio" name="paymentMethod" value="cash" checked/>
                Thanh to√°n ti·ªÅn m·∫∑t t·∫°i qu·∫ßy
            </label>
            <label>
                <input type="radio" name="paymentMethod" value="bank"/>
                Chuy·ªÉn kho·∫£n ng√¢n h√†ng
            </label>

            <div class="bank-wrapper">
                <h4>Ch·ªçn n·ªÅn t·∫£ng thanh to√°n</h4>
                <div class="bank-options">
                    <label class="bank-option"><input type="radio" name="platform" value="momo" checked><img
                            th:src="@{/images/logo-momo.png}" alt="Momo"/><span>Momo</span></label>
                    <label class="bank-option"><input type="radio" name="platform" value="vnpay"><img
                            th:src="@{/images/logo-vnpay.png}" alt="VNPAY"/><span>VNPAY</span></label>
                    <label class="bank-option"><input type="radio" name="platform" value="vietcombank"><img
                            th:src="@{/images/logo-vietcombank.png}" alt="Vietcombank"/><span>Vietcombank</span></label>
                    <label class="bank-option"><input type="radio" name="platform" value="mbbank"><img
                            th:src="@{/images/logo-mbbank.png}" alt="MB Bank"/><span>MB Bank</span></label>
                    <label class="bank-option"><input type="radio" name="platform" value="techcombank"><img
                            th:src="@{/images/logo-techcombank.png}" alt="Techcombank"/><span>Techcombank</span></label>
                    <label class="bank-option"><input type="radio" name="platform" value="bidv"><img
                            th:src="@{/images/logo-bidv.png}" alt="BIDV"/><span>BIDV</span></label>
                </div>
            </div>

            <button type="submit" id="submitButton">Thanh to√°n</button>
        </form>
    </div>
</div>

<footer>
    <p>&copy; 2025 La CiTa Hotel. All rights reserved.</p>
</footer>

<script th:src="@{/customer/payment/payment.js}"></script>
</body>
</html>
