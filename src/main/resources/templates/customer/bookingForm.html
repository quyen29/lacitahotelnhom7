<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th√¥ng tin ƒë·∫∑t ph√≤ng</title>
    <link rel="stylesheet" th:href="@{/customer/bookingForm/bookingForm.css}">
</head>
<body>
<header>
    <div class="navbar">
        <div class="logo">La CiTa</div>
        <div class="menu">
            <a th:href="@{/}">Trang ch·ªß</a>
            <a th:href="@{/booking}" class="active">ƒê·∫∑t ph√≤ng</a>
            <a th:href="@{/promotion}">Khuy·∫øn m√£i</a>
            <a th:href="@{/contact}">Li√™n h·ªá</a>
        </div>
        <div class="user-menu">
            <span sec:authorize="!isAuthenticated()">
                <div class="user-icon">üë§</div>
                <div class="user-options" id="userOptions">
                    <a type="submit" th:href="@{/showLoginPage}">ƒêƒÉng nh·∫≠p</a>
                    <a type="submit" th:href="@{/register}">ƒêƒÉng k√Ω</a>
                </div>
            </span>
            <span sec:authorize="isAuthenticated()">
                <div class="user-icon">üë§</div>
                <div class="user-options" id="userOptions">
                    <a type="submit" th:href="@{/profile}">Ch·ªânh s·ª≠a h·ªì s∆°</a>
                    <a type="submit" th:href="@{/bookingHistory}">Xem l·ªãch s·ª≠ ƒë·∫∑t ph√≤ng</a>
                    <form th:action="@{/logout}" method="POST" class="logout-form">
                        <input type="submit" value="ƒêƒÉng xu·∫•t" class="logout-btn"/>
                    </form>
                </div>
            </span>
        </div>
    </div>
</header>
<div class="intro-text">
    <h1>ƒê·∫∂T PH√íNG</h1>
    <p>Vui l√≤ng ki·ªÉm tra v√† x√°c nh·∫≠n th√¥ng tin ƒë·∫∑t ph√≤ng.</p>
</div>
<div class="booking-wrapper">
    <div class="booking-left">
        <h3>Th√¥ng tin ƒë·∫∑t ph√≤ng</h3>
        <form th:method="POST" th:action="@{/booking/showBookingForm/payment}" id="bookingSubmitForm">
            <input type="hidden" name="roomTypeId" th:value="${roomType.roomTypeID}">
            <input type="hidden" name="price" th:value="${roomType.price}">
            <input type="hidden" name="checkInDate" id="hiddenCheckInDate">
            <input type="hidden" name="checkOutDate" id="hiddenCheckOutDate">
            <input type="hidden" name="checkInHour" id="hiddenCheckInHour">
            <input type="hidden" name="checkOutHour" id="hiddenCheckOutHour">
            <input type="hidden" name="roomQuantity" id="hiddenRoomQuantity">
            <input type="hidden" name="totalPeople" id="hiddenTotalPeople">
            <input type="hidden" name="numberOfAdult" id="hiddenNumberOfAdult">
            <input type="hidden" name="numberOfChild" id="hiddenNumberOfChild">
            <input type="hidden" name="adult" id="hiddenAdult">
            <input type="hidden" name="elder" id="hiddenElder">
            <input type="hidden" name="teen" id="hiddenTeen">
            <input type="hidden" name="child" id="hiddenChild">
            <input type="hidden" name="underThree" id="hiddenUnderThree">
            <input type="hidden" name="totalPrice" id="hiddenTotalPrice">

            <p><strong>Lo·∫°i ph√≤ng:</strong> <span th:text="${roomType.roomTypeName}"></span></p>
            <p><strong>Gi√° c∆° b·∫£n:</strong> <span th:text="${#numbers.formatDecimal(roomType.price, 0, 'COMMA', 0, 'POINT')} + ' VND'"></span></p>

            <div class="form-group">
                <div class="inline-row">
                    <label>Ng√†y nh·∫≠n ph√≤ng:</label>
                    <input type="date" id="checkInDate" name="checkInDate_input" required th:attr="min=${#temporals.format(#temporals.createNow().plusDays(1), 'yyyy-MM-dd')}">
                    <select id="checkInHour" name="checkInHour">
                        <option th:each="i : ${#numbers.sequence(0, 23)}" th:value="${i}" th:text="${i + ':00'}">00:00</option>
                    </select>
                </div>
                <div class="inline-row">
                    <label>Ng√†y tr·∫£ ph√≤ng:</label>
                    <input type="date" id="checkOutDate" name="checkOutDate_input" required th:attr="min=${#temporals.format(#temporals.createNow().plusDays(1), 'yyyy-MM-dd')}">
                    <select id="checkOutHour" name="checkOutHour">
                        <option th:each="i : ${#numbers.sequence(0, 23)}" th:value="${i}" th:text="${i + ':00'}">00:00</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <div class="inline-row">
                    <label>S·ªë l∆∞·ª£ng ph√≤ng:</label>
                    <select id="roomQuantitySelect">
                        <option th:each="i : ${#numbers.sequence(1, available)}" th:value="${i}" th:text="${i}">1</option>
                    </select>
                    <span>S·ªë l∆∞·ª£ng ph√≤ng tr·ªëng: <span th:text="${available}"></span></span>
                </div>
            </div>

            <div class="form-group">
                <div class="inline-controls">
                    <label>S·ªë l∆∞·ª£ng ng∆∞·ªùi l·ªõn (18-59 tu·ªïi):</label>
                    <select id="adultInput"></select>
                    <span id="priceAdult" th:attr="data-price=${priceByAge[4]}" th:text="${#numbers.formatDecimal(priceByAge[4], 0, 'COMMA', 0, 'POINT')} + ' VND/ng∆∞·ªùi'"></span>
                </div>
                <div class="inline-controls">
                    <label>S·ªë l∆∞·ª£ng ng∆∞·ªùi cao tu·ªïi (tr√™n 60 tu·ªïi):</label>
                    <select id="elderInput"></select>
                    <span id="priceElder" th:attr="data-price=${priceByAge[5]}" th:text="${#numbers.formatDecimal(priceByAge[5], 0, 'COMMA', 0, 'POINT')} + ' VND/ng∆∞·ªùi'"></span>
                </div>
                <div class="inline-controls">
                    <label>S·ªë l∆∞·ª£ng tr·∫ª v·ªã th√†nh ni√™n (12-17 tu·ªïi):</label>
                    <select id="teenInput"></select>
                    <span id="priceTeen" th:attr="data-price=${priceByAge[3]}" th:text="${#numbers.formatDecimal(priceByAge[3], 0, 'COMMA', 0, 'POINT')} + ' VND/ng∆∞·ªùi'"></span>
                </div>
                <div class="inline-controls">
                    <label>S·ªë l∆∞·ª£ng tr·∫ª em (3-11 tu·ªïi):</label>
                    <select id="childInput"></select>
                    <span id="priceChild" th:attr="data-price=${priceByAge[2]}" th:text="${#numbers.formatDecimal(priceByAge[2], 0, 'COMMA', 0, 'POINT')} + ' VND/ng∆∞·ªùi'"></span>
                </div>
                <div class="inline-controls">
                    <label>S·ªë l∆∞·ª£ng tr·∫ª nh·ªè d∆∞·ªõi 3 tu·ªïi (0-2 tu·ªïi):</label>
                    <select id="underThreeInput"></select>
                    <span id="priceUnderThree" th:attr="data-price=${priceByAge[1]}" th:text="${#numbers.formatDecimal(priceByAge[1], 0, 'COMMA', 0, 'POINT')} + ' VND/ng∆∞·ªùi'"></span>
                </div>
                <div id="peopleError"></div>
            </div>

            <div class="price-display" id="priceDisplay">
                T·ªïng gi√°: 0 VND (0 gi·ªù, 0 ph√≤ng)
            </div>

            <button type="submit" class="btn pay-btn">THANH TO√ÅN</button>
        </form>
    </div>

    <div class="booking-right">
        <div class="room-preview">
            <div class="room-image">
                <h3>H√¨nh ·∫£nh:</h3>
                <img th:src="${roomType.roomImage}" alt="Room Image">
            </div>
            <div class="room-area">
                <h3>Di·ªán t√≠ch:</h3>
                <p th:text="${roomType.area + ' m¬≤'}"></p>
            </div>
            <div class="room-capacity">
                <h3>S·ª©c ch·ª©a t·ªëi ƒëa:</h3>
                <p><span id="maxPeople" th:text="${roomType.maxOccupancy}"></span> ng∆∞·ªùi</p>
            </div>
            <div class="room-description">
                <h3>M√¥ t·∫£:</h3>
                <p th:text="${roomType.description}"></p>
            </div>
        </div>
    </div>
</div>

<footer>
    <p>&copy; 2025 La CiTa Hotel. All rights reserved.</p>
</footer>
<script th:src="@{/customer/bookingForm/bookingForm.js}"></script>
</body>
</html>
